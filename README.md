## Модуль 7 Домашнее задание

Часть 1. Данные о пользователе
Ваша задача спроектировать структуру таблиц для хранения описанной ниже
информации и написать запрос для создания этих таблиц. Стоит учесть, что каждый
пользователь может находиться во многих группах одновременно.
Пользователи
В информации о пользователе нам потребуется хранить следующую
информацию:
- флаг активности пользователя (активен/неактивен);
- фио;
- email;
- телефон;
- пароль (не должен хранится в исходном виде, а должен быть зашифрован);
- флаг согласия на получение уведомлений по email (согласен/не согласен).
Группы пользователей
У групп пользователей должны быть:
- название группы;
- описание группы.
Правила именования таблиц и полей
- Название таблиц - обычно имя сущности во множественном числе, например:
- если это таблица с пользователями, то тогда название: users;
- если это группы, то: groups.
- Слова в названиях таблиц и названиях полей отделяются символом нижнего
подчеркивания, например message_sections.
- Поля и таблицы именуются в нижнем регистре - snake_case.
- Не "тавтологируйте", например в таблице users - создать поля user_login,
user_phone, id_user и т.п. - это тавтология, вы же и так находитесь в таблице
пользователей - поэтому префиксы и постфиксы с этим именем - лишние.
1
- Каноничное название для таблиц, хранящих связь между элементами - это
объекты в единственном числе отсортированные в алфавитном порядке через
символ подчеркивания, например, если это связь пользователь-группа, то
таблица должна называться group_user.

## Часть 2. Данные о сообщениях
Вам также требуется спроектировать недостающие таблицы для хранения
сообщений и разделения сообщений на разделы.
Разделы сообщений
Необходимо хранить список сообщений пользователей с возможностью
разделять их на разделы, при этом у каждого раздела для сообщений может быть
свой подраздел. Уровень вложенности не ограничен. Для каждого раздела сообщения
должна быть возможность задать:
- название раздела;
- дополнительную метку цвета, с заранее определенным списком возможных
цветов;
- дата и время создания раздела;
- пользователь создавший раздел.
Например, сообщения могут быть разделены следующим образом:
- Основные
- по работе
- личные
- Оповещения
- форумы
- магазины
- подписки
- Спам
(это разделение должно быть уже пред заполнено вами в приложенном дампе)
Сообщения
В информации о сообщении должна храниться следующая информация:
- текст сообщения;
- заголовок;
- дата и время создания сообщения;
- пользователь отправитель;
- пользователь получатель.

## Часть 3. Доработка проекта
**Авторизация**

После того, как вы спроектировали структуру таблиц, необходимо сделать,
чтобы форма авторизации в вашем проекте работала не через файлы, а через БД.
Проверка логина и пароля должна происходить из спроектированной вами БД. Старые
файлы с логинами и паролями - удалите. В приложенном дампе всем пользователям
установите пароль 123456.

**Профиль**

Необходимо добавить страницу с профилем пользователя, без возможности
изменения. На этой странице отображаются в виде списка все поля пользователя, а
также все группы, к которым этот пользователь принадлежит.

## *Задание со звездочкой:

**Группы пользователей**

Необходимо создать две группы:
- Зарегистрированный пользователь;
- Пользователь имеющий право писать сообщения.

**Страница со списком сообщений**
Раздел для сообщений находится по адресу /posts/.
Зарегистрированный пользователь после авторизации, на странице /posts/
видит сообщение - “Вы сможете отправлять сообщения после прохождения
модерации”.
Пользователь имеющий право писать сообщения после авторизации, на
странице /posts/ видит два списка непрочитанных и прочитанных сообщений
(доработать архитектуру хранения данных). Каждое сообщение - ссылка, состоящая из
заголовка сообщения и названия раздела, ведущая на страницу просмотра
сообщения.
Также на странице со списком отображается ссылка "Написать сообщение".
При клике на нее должен осуществляться переход на страницу /posts/add/.
Страница добавления сообщения
На странице (/posts/add/) должна быть размещена форма состоящая из полей:
- Заголовок - текстовое поле;
- Текст сообщения - текстовое поле;
- Пользователь (кому отправить сообщение) - выбирается из списка всех
пользователей, которые состоят в группе “Пользователь имеющий право
писать сообщения”;
- Раздел сообщения - выбор доступных разделов в виде списка состоящем из
названия и цвета раздела;
- Кнопка "Отправить".
После нажатия на кнопку "Отправить", информация должна корректно
добавится в спроектированные вами таблицы. При возникновении ошибки валидации
или ошибки добавления записи - нужно вывести текст этой ошибки обратно в форму, а
также подставить в форму ранее введенные данные.
Страница просмотра сообщения
На странице должна отображаться следующая информация:
- заголовок и дата отправки;
- кто написал - ФИО и его email;
- полный текст сообщения.
После перехода на сообщение, у сообщения, должен установится признак что
сообщение прочитано
